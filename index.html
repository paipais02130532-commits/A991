<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğ€ğ¬ğ¬ğğ§â¹â¹è»Šè³‡è©¦ç®—</title>

<style>
:root{
  --primary:#6B7C84;
  --secondary:#4F606A;
  --bg:#F5F6F7;
  --card:#E3E8EB;
  --hover:#3B4B53;
}

body{
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:var(--bg);
  display:flex;
  flex-direction:column;
  align-items:center;
  padding-top:20px;
  margin:0;
}

/* âœ… é¡¶éƒ¨ LOGO + æ ‡é¢˜ç¨³å®šå¸ƒå±€ */
nav{
  width:100%;
  background:var(--primary);
  color:#fff;
  padding:14px 0;
  border-radius:0 0 20px 20px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:6px;
}

nav img{width:100px;height:auto}

.nav-title{
  font-size:20px;
  font-weight:bold;
  line-height:1.2;
}

.card{
  width:360px;
  background:var(--card);
  padding:28px;
  border-radius:20px;
  box-shadow:0 12px 30px rgba(0,0,0,.12);
  margin-top:20px;
}

h1{
  text-align:center;
  color:var(--primary);
  margin-top:0;
}

label.title{
  display:block;
  margin-top:14px;
  font-size:14px;
}

input[type="text"]{
  width:100%;
  padding:10px;
  margin-top:6px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:14px;
}

/* âœ… checkbox ä¸è·‘ä½ */
.checkbox-row{margin-top:12px}
.checkbox-row label{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:14px;
  cursor:pointer;
}

button{
  width:100%;
  margin-top:14px;
  padding:12px;
  border:none;
  border-radius:12px;
  font-size:16px;
  font-weight:bold;
  cursor:pointer;
  background:var(--secondary);
  color:#fff;
}

button:hover{background:var(--hover)}

.line-main{background:#06C755}
.line-main:hover{background:#04B14F}

.line-direct{background:var(--primary)}
.line-direct:hover{background:var(--hover)}

.result{
  margin-top:14px;
  text-align:center;
  font-weight:bold;
  white-space:pre-line;
}

#lineMsgContainer{
  margin-top:10px;
  background:#fff;
  border:1px dashed var(--secondary);
  padding:10px;
  border-radius:10px;
  font-size:14px;
  white-space:pre-wrap;
}

#tip{
  margin-top:10px;
  font-size:13px;
  text-align:center;
  color:#555;
  line-height:1.5;
}

#map{
  width:360px;
  height:300px;
  border-radius:20px;
  margin:20px 0 30px;
}

.pac-container{z-index:9999!important}
</style>
</head>

<body>

<nav>
  <img src="A99LOGO.png" alt="ASSEN99 LOGO">
  <div class="nav-title">ğ€ğ¬ğ¬ğğ§â¹â¹è»Šè³‡è©¦ç®—</div>
</nav>

<div class="card">
<h1>è»Šè³‡è©¦ç®—</h1>

<label class="title">èµ·é»åœ°å€</label>
<input type="text" id="origin" placeholder="è¼¸å…¥èµ·é»åœ°å€">

<label class="title">çµ‚é»åœ°å€</label>
<input type="text" id="destination" placeholder="è¼¸å…¥çµ‚é»åœ°å€">

<div class="checkbox-row">
  <label>
    <input type="checkbox" id="avoidHighways">
    é¿é–‹é«˜é€Ÿå…¬è·¯
  </label>
</div>

<div class="checkbox-row">
  <label>
    <input type="checkbox" id="avoidTolls">
    é¿é–‹æ”¶è²»é“è·¯
  </label>
</div>

<button onclick="calculateFare()">è¨ˆç®—è»Šè³‡</button>

<button class="line-main" onclick="sendToLine()">
ä¸€éµè¤‡è£½ğŸ“©å‚³é€åˆ° LINE å®˜æ–¹
</button>

<button class="line-direct" onclick="openLineOnly()">
ç›´æ¥å‰å¾€ã€ Assenâ¹â¹ ã€‘LINEå®˜æ–¹
</button>

<div class="result" id="result">â€”</div>
<div id="lineMsgContainer"></div>

<div id="tip">
ğŸ’¡ æº«é¦¨æé†’ï¼šé ä¼°è»Šè³‡åƒ…ä¾›åƒè€ƒ<br>
â–ªï¸ è¡Œè»Šæ™‚é–“ã€è·¯æ³çš†æœƒå½±éŸ¿è¨ˆè²»<br>
â–ªï¸ æœ€å¾Œæ”¶è²»æœƒä¾å¯¦éš›è·³éŒ¶ç‚ºä¸»
</div>
</div>

<div id="map"></div>

<script>
let map,ds,dr,lastData=null;

function clean(t){
 return t.replace(/\[?(å°ç£|å°æ¹¾)\]?/g,'').replace(/,\s*/g,'').trim();
}

function initMap(){
 map=new google.maps.Map(document.getElementById("map"),{
  center:{lat:25.033,lng:121.5654},zoom:13});
 ds=new google.maps.DirectionsService();
 dr=new google.maps.DirectionsRenderer({map});
 new google.maps.places.Autocomplete(origin);
 new google.maps.places.Autocomplete(destination);
}

function calculateFare(){
 const o=clean(origin.value),d=clean(destination.value);
 if(!o||!d){result.innerText='è«‹è¼¸å…¥å®Œæ•´åœ°å€';return;}

 ds.route({
  origin:o,
  destination:d,
  travelMode:'DRIVING',
  avoidHighways:avoidHighways.checked,
  avoidTolls:avoidTolls.checked
 },(r,s)=>{
  if(s!=='OK'){result.innerText='è·¯ç·šè¨ˆç®—å¤±æ•—';return;}
  dr.setDirections(r);
  const leg=r.routes[0].legs[0];
  const km=leg.distance.value/1000;
  const min=leg.duration.value/60;
  const fare=100+(km<=15?km*15:15*15+(km-15)*25)+min*3;
  lastData={o,d};
  result.innerText=
`è·é›¢ï¼šç´„ ${km.toFixed(1)} å…¬é‡Œ
æ™‚é–“ï¼šç´„ ${min.toFixed(0)} åˆ†é˜
é ä¼°è»Šè³‡ï¼š${fare.toFixed(0)} å…ƒ`;
  lineMsgContainer.innerText=
`ğŸš• ASSENâ¹â¹ å«è»Šéœ€æ±‚
èµ·é»ï¼š${o}
çµ‚é»ï¼š${d}`;
 });
}

function sendToLine(){
 if(!lastData){alert('è«‹å…ˆè¨ˆç®—è»Šè³‡');return;}
 const t=lineMsgContainer.innerText;
 navigator.clipboard.writeText(t).then(()=>{
  if(confirm('å·²è‡ªå‹•è¤‡è£½å«è»Šéœ€æ±‚ï¼Œè²¼ä¸Šå¾Œç«‹å³ç‚ºæ‚¨å°‹è»Šã€‚\næ˜¯å¦è¦æ‰“é–‹ LINE å®˜æ–¹èŠå¤©ï¼Ÿ')){
    window.open('https://line.me/R/ti/p/@751cgaza','_blank');
  }
 });
}

function openLineOnly(){
 window.open('https://line.me/R/ti/p/@751cgaza','_blank');
}
</script>

<script async
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAL4_x2YFpSR0SY8ybPXLXy3U5-El1iHH4&libraries=places&callback=initMap">
</script>

</body>
</html>
